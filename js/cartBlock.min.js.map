{"version":3,"sources":["cartBlock.js"],"names":["$","document","ready","body","on","e","preventDefault","$product_key","attr","ajax","url","ajax_url","type","dataType","data","success","trigger","error","console","log","get_cart_contents","$output","response","cartparams","products","product","push","cartBlockItem","cartBlockObject","cartBlock","update_cart","params","container_count","container_total","container_productsCount","container_products","cart_count","cart_total","self","update_cart_total","update_cart_count","update_cart_products","html","addClass","setTimeout","removeClass","productsHTML","length","generate_cart_item","generate_empty_cart_item","qty","sku","cart_key","name","thumb_url","product_url","price","jQuery"],"mappings":"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","file":"cartBlock.min.js","sourcesContent":["(function ($) {\r\n\r\n    $(document).ready(function(){\r\n\r\n        // Remove item from cart\r\n        $(document.body).on('click', '.cartBlock__navbtn--remove', function(e){\r\n            e.preventDefault();\r\n            var $product_key = $(this).attr('data-key');\r\n            $.ajax({\r\n                url: ajax_url,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                data: {\r\n                'action': 'remove_item_from_cart',\r\n                'product_key': $product_key\r\n                },\r\n                success:function(){\r\n                    $(document.body).trigger('cart_update');\r\n                },\r\n                error: function(){\r\n                    console.log('Nie udało się zaaktualizować ilości elementów w koszyku.')\r\n                }\r\n            });\r\n            \r\n        });\r\n\r\n        $(document.body).on('cart_update', get_cart_contents);\r\n        \r\n        function get_cart_contents(){\r\n            var $output;\r\n            $.ajax({\r\n                url: ajax_url,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                data: {\r\n                'action': 'get_cart_contents',\r\n                },\r\n                success:function(response){\r\n                    var cartparams = {\r\n                        'container_count': $('.cartBlock__cartCount'),\r\n                        'container_total': $('.cartBlock__total'),\r\n                        'container_productsCount': $('.cartBlock__badge small'),\r\n                        'container_products': $('.cartBlock__products'),\r\n                        'cart_count': response['cart_count'],\r\n                        'cart_total': response['cart_total']\r\n                    }\r\n                    var products = [];\r\n                    for (const product in response['products']) {\r\n                        products.push(new cartBlockItem(response['products'][product]));\r\n                    }\r\n                    var cartBlockObject = new cartBlock(cartparams, products);\r\n\r\n                    cartBlockObject.update_cart();\r\n                },\r\n                error: function(){\r\n                    console.log('Nie udało się zaaktualizować ilości elementów w koszyku.')\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    }) // document ready\r\n\r\n        class cartBlock {\r\n\r\n            constructor(params, products) {\r\n                this.container_count = params['container_count'];\r\n                this.container_total = params['container_total'];\r\n                this.container_productsCount = params['container_productsCount'];\r\n                this.container_products = params['container_products'];\r\n                this.products = products;\r\n                this.cart_count = params['cart_count'];\r\n                this.cart_total = params['cart_total'];\r\n                self = this;\r\n            }\r\n\r\n            update_cart(){\r\n                this.update_cart_total();\r\n                this.update_cart_count();\r\n                this.update_cart_products();\r\n            }\r\n\r\n            update_cart_total(){\r\n                this.container_total.html(self.cart_total);\r\n            }            \r\n            update_cart_count(){\r\n                this.container_count.html(self.cart_count);\r\n                this.container_count.addClass('bounce');\r\n                setTimeout(function(){ \r\n                    self.container_count.removeClass('bounce');\r\n                }, 1000);\r\n            }\r\n            update_cart_products(){\r\n                var productsHTML = '';\r\n\r\n                if (this.products.length > 0) {\r\n                    for (const product in this.products) {\r\n                        productsHTML += this.products[product].generate_cart_item(); \r\n                    }\r\n                }else{\r\n                    productsHTML += this.generate_empty_cart_item(); \r\n                }\r\n\r\n                this.container_products.html(productsHTML);\r\n            }\r\n\r\n            generate_empty_cart_item(){\r\n                var $output =`<div class=\"cartBlock__product\">\r\n                    <div class=\"cartBlock__empty\">\r\n                        Brak produktów w koszyku.\r\n                    </div>\r\n                </div>`;\r\n\r\n                return $output;\r\n            }\r\n\r\n        }\r\n\r\n        class cartBlockItem {\r\n\r\n            constructor(params) {\r\n                this.qty = params['qty'];\r\n                this.sku = params['sku'];\r\n                this.cart_key = params['cart_key'];\r\n                this.name = params['name'];\r\n                this.thumb_url = params['thumb_url'];\r\n                this.product_url = params['product_url'];     \r\n                this.price = params['price'];     \r\n            }\r\n\r\n            generate_cart_item(){\r\n                var $output =`<div class=\"cartBlock__product\" data-key=\"${this.cart_key}\">\r\n                    <div class=\"cartBlock__product_Image\">\r\n                        <img src=\"${this.thumb_url}\" alt=\"${this.name}\">\r\n                    </div>\r\n                    <div class=\"cartBlock__product_Details\">\r\n                        <div class=\"cartBlock__product_Title\">\r\n                            <a class=\"linkReverse\" href=\"${this.product_url}\">${this.name}</a>\r\n                        </div>\r\n                        <div class=\"cartBlock__product_SKU\">\r\n                            SKU ${this.sku}\r\n                        </div>\r\n                        <div class=\"cartBlock__navbtns\">\r\n                            <div class=\"cartBlock__navbtn cartBlock__navbtn--qty\">\r\n                                ${this.qty}\r\n                            </div>\r\n                            <div class=\"cartBlock__navbtn cartBlock__navbtn--remove\" data-key=\"${this.cart_key}\">\r\n                                X\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"clearfix\"></div>\r\n                    <div class=\"cartBlock__product_Price italic\">\r\n                        ${this.price}\r\n                    </div>\r\n                </div>`;\r\n\r\n                return $output;\r\n            }\r\n\r\n        }\r\n\r\n})(jQuery);\r\n\r\n"]}